<!-- API Tester Section -->
<section id="tester" class="content-section">
    <div class="mb-8 flex justify-between items-center">
        <div>
            <h2 class="text-4xl font-bold text-cyan-300 mb-2">Testar API</h2>
            <p class="text-gray-400">Teste a funcionalidade da API de download de mídia</p>
        </div>
        <button class="batch-download-btn py-2 px-4 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg transition-all">
            <i class="fas fa-download mr-2"></i>Download em Lote
        </button>
    </div>
    
    <!-- Status dos Cookies -->
    <div class="mb-6">
        <div class="glass-effect p-4 rounded-lg">
            <h3 class="text-lg font-semibold mb-3 text-cyan-300">
                <i class="fas fa-cookie-bite mr-2"></i>Status dos Cookies
            </h3>
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    {% if cookie_status == 'ok' %}
                        <span class="cookie-status valid">
                            <i class="fas fa-check-circle mr-1"></i>Cookies Válidos
                        </span>
                        <span class="text-sm text-gray-400">
                            Cookies funcionando corretamente
                        </span>
                    {% elif cookie_status == 'expired' %}
                        <span class="cookie-status expired">
                            <i class="fas fa-exclamation-triangle mr-1"></i>Cookies Expirados
                        </span>
                        <span class="text-sm text-gray-400">
                            Cookies precisam ser atualizados
                        </span>
                    {% elif cookie_status == 'needs_sync' %}
                        <span class="cookie-status needs_sync">
                            <i class="fas fa-sync mr-1"></i>Precisa Sincronizar
                        </span>
                        <span class="text-sm text-gray-400">
                            Cookies no banco, mas não no filesystem
                        </span>
                    {% else %}
                        <span class="cookie-status none">
                            <i class="fas fa-exclamation-triangle mr-1"></i>Sem Cookies
                        </span>
                        <span class="text-sm text-gray-400">
                            Alguns vídeos podem requerer autenticação
                        </span>
                    {% endif %}
                </div>
                
                {% if cookie_file_exists %}
                    <button class="sync-cookies-btn py-2 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white text-sm rounded-lg transition-all">
                        <i class="fas fa-sync mr-2"></i>Sincronizar
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
    
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="glass-effect p-6 rounded-xl shadow-lg card-hover">
            <h3 class="text-xl font-semibold mb-4 text-cyan-300">
                <i class="fas fa-play-circle mr-2"></i>Formulário de Teste
            </h3>
            <form id="api-test-form" class="space-y-4">
                <div>
                    <label for="url" class="block text-sm font-medium text-gray-400 mb-2">URL do Vídeo</label>
                    <input type="url" name="url" id="url" placeholder="https://www.youtube.com/watch?v=..." required class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all">
                </div>
                <div>
                    <label for="type" class="block text-sm font-medium text-gray-400 mb-2">Tipo</label>
                    <select name="type" id="type" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                        <option value="audio">Áudio (MP3)</option>
                        <option value="video">Vídeo (MP4)</option>
                    </select>
                </div>
                <div>
                    <label for="quality" class="block text-sm font-medium text-gray-400 mb-2">Qualidade (Vídeo)</label>
                    <select name="quality" id="quality" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                        <option value="">Melhor qualidade disponível</option>
                        <option value="2160p">4K (2160p)</option>
                        <option value="1440p">2K (1440p)</option>
                        <option value="1080p">Full HD (1080p)</option>
                        <option value="720p">HD (720p)</option>
                        <option value="480p">SD (480p)</option>
                        <option value="360p">360p</option>
                        <option value="240p">240p</option>
                    </select>
                </div>
                <div>
                    <label for="bitrate" class="block text-sm font-medium text-gray-400 mb-2">Bitrate (Áudio)</label>
                    <select name="bitrate" id="bitrate" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                        <option value="">Melhor qualidade disponível</option>
                        <option value="320k">320 kbps (Máxima)</option>
                        <option value="256k">256 kbps (Alta)</option>
                        <option value="192k">192 kbps (Boa)</option>
                        <option value="128k">128 kbps (Padrão)</option>
                        <option value="96k">96 kbps (Baixa)</option>
                        <option value="64k">64 kbps (Mínima)</option>
                    </select>
                </div>
                <button type="submit" class="w-full py-3 px-4 rounded-lg text-white font-semibold bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800 flex items-center justify-center space-x-2 transition-all">
                    <i class="fa-solid fa-paper-plane"></i>
                    <span>Enviar Requisição</span>
                </button>
            </form>
        </div>
        
        <div class="glass-effect p-6 rounded-xl shadow-lg card-hover">
            <h3 class="text-xl font-semibold mb-4 text-cyan-300">
                <i class="fas fa-terminal mr-2"></i>Log da Requisição
            </h3>
            <div id="api-test-log" class="bg-gray-900 rounded-lg p-4 h-80 overflow-y-auto font-mono text-sm border border-gray-700">
                <p class="text-gray-500">Aguardando requisição...</p>
            </div>
        </div>
    </div>
</section>

<!-- Batch Download Modal -->
<div id="batch-download-modal" class="modal fixed inset-0 bg-black/70 items-center justify-center z-50">
    <div class="glass-effect rounded-xl shadow-2xl w-full max-w-2xl">
        <div class="flex justify-between items-center p-6 border-b border-gray-600">
            <h3 class="text-xl font-bold text-cyan-300">Download em Lote</h3>
            <button class="close-modal-btn text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        <div class="p-6">
            <form id="batch-download-form">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Nome do Lote</label>
                        <input type="text" name="batch_name" required class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Tipo</label>
                        <select name="type" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
                            <option value="audio">Áudio (MP3)</option>
                            <option value="video">Vídeo (MP4)</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Qualidade (Vídeo)</label>
                        <select name="quality" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
                            <option value="">Melhor qualidade disponível</option>
                            <option value="2160p">4K (2160p)</option>
                            <option value="1440p">2K (1440p)</option>
                            <option value="1080p">Full HD (1080p)</option>
                            <option value="720p">HD (720p)</option>
                            <option value="480p">SD (480p)</option>
                            <option value="360p">360p</option>
                            <option value="240p">240p</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Bitrate (Áudio)</label>
                        <select name="bitrate" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
                            <option value="">Melhor qualidade disponível</option>
                            <option value="320k">320 kbps (Máxima)</option>
                            <option value="256k">256 kbps (Alta)</option>
                            <option value="192k">192 kbps (Boa)</option>
                            <option value="128k">128 kbps (Padrão)</option>
                            <option value="96k">96 kbps (Baixa)</option>
                            <option value="64k">64 kbps (Mínima)</option>
                        </select>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-400 mb-2">Pasta de Destino</label>
                    <select name="folder_id" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
                        <option value="">Raiz</option>
                        {% for folder in folders %}
                        <option value="{{ folder.id }}">{{ folder.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-400 mb-2">URLs (uma por linha)</label>
                    <textarea name="urls" rows="8" placeholder="https://youtube.com/watch?v=...&#10;https://youtube.com/playlist?list=...&#10;..." required class="w-full bg-gray-700/50 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"></textarea>
                    <p class="text-xs text-gray-500 mt-1">Suporta URLs individuais e playlists do YouTube</p>
                </div>
                <div class="flex space-x-3">
                    <button type="button" class="close-modal-btn flex-1 py-2 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all">
                        Cancelar
                    </button>
                    <button type="submit" class="flex-1 py-2 px-4 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg transition-all">
                        Iniciar Download
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>